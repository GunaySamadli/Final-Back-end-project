
@model List<BasketItemViewModel>

@{
    Layout = null;
    double totalCount = 0;
    foreach (var item in Model)
    {
        totalCount += item.Price * item.Count;
    }

    double itemTotalCount = 0;
    foreach (var item in Model)
    {
        itemTotalCount += item.Price * item.Count;
    }
}

<div class="basket">
    <div>
        <div class="basket-header">
            <a href="">
                <i class="fas fa-chevron-left close-basket"></i>
            </a>
            <span>You're Basket</span>
            <a href="">
                <svg width="20" height="20" xmlns="http://www.w3.org/2000/svg"
                     viewBox="0 0 512 512">
                    <path d="M422.2 484.9H90L37.6 189.6h130.3c-4.7 25.5-7.9 48-9.7 62.5-.9 6.9 3.9 13.2 10.8 14.1.5.1 1.1.1 1.7.1 6.2 0 11.6-4.6 12.4-10.9 2.8-22 6.5-44.1 10.5-65.7h126.7c3.7 22.6 6.6 45 8.5 65.2.6 7 6.9 12.1 13.6 11.4 7-.6 11.9-6.7 11.4-13.7-1-11.3-3.6-34.8-7.9-62.9h128.4l-52.1 295.2zM255.5 27.1c25 0 46.7 66.2 60.5 137.3H198.7c16.1-75.7 38.2-137.3 56.8-137.3zm243.6 141.8c-2.4-2.8-6-4.4-9.7-4.4H341.7C328.3 91 302.3 2 255.5 2c-40.8 0-67.4 87.6-82.8 162.4H22.6c-3.7 0-7.2 1.7-9.7 4.4-2.4 2.8-3.4 6.6-2.7 10.3l57 320.4c1 6 6.2 10.4 12.3 10.4h353.2c6.1 0 11.3-4.3 12.3-10.4l56.8-320.4c.7-3.6-.3-7.3-2.7-10.2z">
                    </path>
                </svg>
        </div>
        <div class="basket-body" id="favorite" data-favorite-count="@Model.Count">
            <div class="container">
                <div class="row">
                    @foreach (var item in Model)
                    {
                        <div class="basket-item">
                            <div class="basket-item-content">
                                <div class="col-md-3">
                                    <img src="~/uploads/product/@item.Image"
                                         alt="">
                                </div>
                                <div class="col-md-9">
                                    <div class="name-icon">
                                        <h2>
                                            @item.Name
                                        </h2>
                                        <a class="delete" data-id="@item.ProductColorId" asp-action="deletefrombasket" asp-controller="product" asp-route-id="@item.ProductColorId">
                                            <i class="fas fa-times"></i>
                                        </a>
                                    </div>
                                    <div class="count-price">
                                        <div class="count">
                                            <span>@item.Count</span>
                                        </div>
                                        <div>
                                            <span class="price">
                                                $ @if (item.Count == 1)
                                                {
                                                    @item.Price
                                                }
                                                else
                                                {
                                                    @itemTotalCount
                                                }
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>

            <div class="basket-footer">
                <div class="basket-footer-content">
                    <h3>
                        Total price
                    </h3>
                    <span>
                        $@totalCount
                    </span>
                </div>
                <div class="checkout">
                    <a class="button button-secondary" asp-action="checkout" asp-controller="order">
                        Continue to Checkout
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>

